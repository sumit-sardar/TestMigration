CREATE TABLE LM_PURCHASE_DATA_SF_STG
(
	CUSTOMER_ID					    INTEGER,
	OAS_IMPLEMENTATION_ID			VARCHAR2(10),
  	IMPL_RECORD_TYPE        		VARCHAR2(64),
	CUSTOMER_ACCOUNT_NAME			VARCHAR2(64),
	ACCOUNT_STATE				    VARCHAR2(2),
	ORG_NODE_ID				      	INTEGER,
	ORG_NODE_NAME				    VARCHAR2(64),
  	CONTACT_PHONE	          		VARCHAR2(32),
  	CONTACT	                		VARCHAR2(64),
  	CONTACT_EMAIL	          		VARCHAR2(64),
	CATEGORY_NAME				    VARCHAR2(64),
	CATEGORY_LEVEL				  	INTEGER,
	LICENSE_MODEL				    VARCHAR2(10),
	LICENSE_COUNT				    INTEGER,
	ORDER_QUANTITY				  	INTEGER,
	LICENSE_DISTRIBUTED_TO			VARCHAR2(10),
	CREATED_DATE				    DATE,
  	INTERVAL_NAME	          		VARCHAR2(32),
	LOAD_DATE_TIME				  	DATE default SYSDATE,
  	LOAD_SEQ_NUM            		INTEGER
);


CREATE TABLE LM_USAGE_DATA_OAS_STG
(
  CUSTOMER_ID              		INTEGER,
  CONTACT_NAME	                VARCHAR2(64),
  CONTACT_PHONE	              	VARCHAR2(32),
  CONTACT_EMAIL	              	VARCHAR2(64),
  STATE_PR	                  	VARCHAR2(2),
  STATE_PR_DESC	              	VARCHAR2(64),
  EXT_CUSTOMER_ID	            VARCHAR2(32),
  PRODUCT_NAME	              	VARCHAR2(64),
  SUBTEST_MODEL            		VARCHAR2(2),
  ORG_NODE_ID              		INTEGER,
  ORG_NODE_NAME            		VARCHAR2(64),
  ORG_NODE_CATEGORY_LEVEL     	INTEGER,
  ORG_NODE_CATEGORY_NAME   		VARCHAR2(64),
  PARENT_ORG_NODE_ID       		INTEGER,
  PARENT_ORG_NODE_NAME     		VARCHAR2(64),
  LIC_AVL_IN_DB            		INTEGER,
  CUM_LIC_AVL_IN_DB        		INTEGER,
  LIC_TO_BE_RELEASED       		INTEGER,
  CUM_LIC_TO_BE_RELEASED   		INTEGER,
  LIC_RESERVED_AT_NODE     		INTEGER,
  CUM_LIC_RESERVED         		INTEGER,
  LIC_CONSUMED_AT_NODE     		INTEGER,
  CUM_LIC_CONSUMED         		INTEGER,
  NODE_LVL_AVAILABLE       		INTEGER,
  CUM_AVAILABLE            		INTEGER,
  NODE_NET_AVAILABLE       		INTEGER,
  CUM_NET_AVAILABLE        		INTEGER,
  LIC_MOD_CONSUMED_AT_NODE 		INTEGER,
  CUM_LIC_MOD_CONSUMED     		INTEGER, 
  LIC_MOD_RESERVED_AT_NODE 		INTEGER,
  CUM_LIC_MOD_RESERVED			INTEGER,
  ACTIVATION_STATUS        		VARCHAR2(2),
  EXTRACT_DATE_TIME        		DATE default SYSDATE,
  EXTRACT_SEQ_NUM             	INTEGER
);


CREATE TABLE LM_DATA_TRACKING_LOG
(
  CUSTOMER_ID INTEGER,
  MESSAGE     VARCHAR2(1024),
  LOG_TIME    DATE
);

CREATE TABLE LM_MERGED_REPORT_DATA
(
	OAS_CUSTOMER_ID              		INTEGER,
	OAS_CONTACT_NAME	                VARCHAR2(64),
	OAS_CONTACT_PHONE	              	VARCHAR2(32),
	OAS_CONTACT_EMAIL	              	VARCHAR2(64),
	OAS_STATE_PR	                  	VARCHAR2(2),
	OAS_STATE_PR_DESC	              	VARCHAR2(64),
	OAS_EXT_CUSTOMER_ID	            	VARCHAR2(32),
	OAS_PRODUCT_NAME	              	VARCHAR2(64),
	OAS_SUBTEST_MODEL            		VARCHAR2(2),
	OAS_ORG_NODE_ID              		INTEGER,
	OAS_ORG_NODE_NAME            		VARCHAR2(64),
	OAS_ORG_NODE_CATEGORY_LEVEL     	INTEGER,
	OAS_ORG_NODE_CATEGORY_NAME   		VARCHAR2(64),
	OAS_PARENT_ORG_NODE_ID       		INTEGER,
	OAS_PARENT_ORG_NODE_NAME     		VARCHAR2(64),
	OAS_LIC_AVL_IN_DB            		INTEGER,
	OAS_CUM_LIC_AVL_IN_DB        		INTEGER,
	OAS_LIC_TO_BE_RELEASED       		INTEGER,
	OAS_CUM_LIC_TO_BE_RELEASED   		INTEGER,
	OAS_LIC_RESERVED_AT_NODE     		INTEGER,
	OAS_CUM_LIC_RESERVED         		INTEGER,
	OAS_LIC_CONSUMED_AT_NODE     		INTEGER,
	OAS_CUM_LIC_CONSUMED         		INTEGER,
	OAS_NODE_LVL_AVAILABLE       		INTEGER,
	OAS_CUM_AVAILABLE            		INTEGER,
	OAS_NODE_NET_AVAILABLE       		INTEGER,
	OAS_CUM_NET_AVAILABLE        		INTEGER,
	OAS_LIC_MOD_CONSUMED_AT_NODE 		INTEGER,
	OAS_CUM_LIC_MOD_CONSUMED     			INTEGER, 
	OAS_LIC_MOD_RESERVED_AT_NODE 		INTEGER,
	OAS_CUM_LIC_MOD_RESERVED			INTEGER,
	OAS_ACTIVATION_STATUS        		VARCHAR2(2),
	OAS_EXTRACT_DATE_TIME        		DATE default SYSDATE,
	OAS_EXTRACT_SEQ_NUM             	INTEGER,
	
	SF_CUSTOMER_ID					    INTEGER,
	SF_OAS_IMPLEMENTATION_ID			VARCHAR2(10),
  	SF_IMPL_RECORD_TYPE        			VARCHAR2(64),
	SF_CUSTOMER_ACCOUNT_NAME			VARCHAR2(64),
	SF_ACCOUNT_STATE				    VARCHAR2(2),
	SF_ORG_NODE_ID				      	INTEGER,
	SF_ORG_NODE_NAME				    VARCHAR2(64),
  	SF_CONTACT_PHONE	          		VARCHAR2(32),
  	SF_CONTACT	                		VARCHAR2(64),
  	SF_CONTACT_EMAIL	          		VARCHAR2(64),
	SF_CATEGORY_NAME				    VARCHAR2(64),
	SF_CATEGORY_LEVEL				  	INTEGER,
	SF_LICENSE_MODEL				    VARCHAR2(10),
	SF_LICENSE_COUNT				    INTEGER,
	SF_ORDER_QUANTITY				  	INTEGER,
	SF_LICENSE_DISTRIBUTED_TO			VARCHAR2(10),
	SF_CREATED_DATE				    	DATE,
  	SF_INTERVAL_NAME	          		VARCHAR2(32),
	SF_LOAD_DATE_TIME				  	DATE default SYSDATE,
  	SF_LOAD_SEQ_NUM            			INTEGER,
	
	MERGED_DATE_TIME	        		DATE default SYSDATE,
	MERGED_SEQ_NUM             			INTEGER
);

-- Create TABE LM Indexes
CREATE INDEX LM_PURCHASE_DATA_SF_STG_IDX ON LM_PURCHASE_DATA_SF_STG (CUSTOMER_ID, ORG_NODE_ID, LOAD_SEQ_NUM);

CREATE INDEX LM_USAGE_DATA_OAS_STG_IDX ON LM_USAGE_DATA_OAS_STG (EXTRACT_SEQ_NUM);

CREATE INDEX LM_MERGED_REPORT_DATA_IDX on LM_MERGED_REPORT_DATA (MERGED_SEQ_NUM);

-- Create TABE LM sequences 
create sequence SEQ_LM_EXTRACT_SEQ_NUM
minvalue 1
maxvalue 999999999999999999999999999
start with 1
increment by 1
NOCACHE;

create sequence SEQ_LM_LOAD_SF_SEQ_NUM
minvalue 1
maxvalue 999999999999999999999999999
start with 1
increment by 1
NOCACHE;

create sequence SEQ_LM_MERGE_SEQ_NUM
minvalue 1
maxvalue 999999999999999999999999999
start with 1
increment by 1
NOCACHE;